function [J] = RobustJacobian(q)
J = zeros(6,7);

cos_q1 = cos(q(1));
sin_q1 = sin(q(1));
cos_q2 = cos(q(2));
sin_q2 = sin(q(2));
cos_q3 = cos(q(3));
sin_q3 = sin(q(3));
cos_q4 = cos(q(4));
sin_q4 = sin(q(4));
cos_q5 = cos(q(5));
sin_q5 = sin(q(5));
cos_q6 = cos(q(6));
sin_q6 = sin(q(6));
cos_q7 = cos(q(7));
sin_q7 = sin(q(7));
J(1,1) = 0;
J(1,2) = -sin_q1;
J(1,3) = cos_q1*sin_q2;
J(1,4) = - cos_q3*sin_q1 - cos_q1*cos_q2*sin_q3;
J(1,5) = cos_q1*cos_q4*sin_q2 - sin_q4*(sin_q1*sin_q3 - cos_q1*cos_q2*cos_q3);
J(1,6) = sin_q5*(cos_q4*(sin_q1*sin_q3 - cos_q1*cos_q2*cos_q3) + cos_q1*sin_q2*sin_q4) - cos_q5*(cos_q3*sin_q1 + cos_q1*cos_q2*sin_q3);
J(1,7) = - cos_q6*(sin_q4*(sin_q1*sin_q3 - cos_q1*cos_q2*cos_q3) - cos_q1*cos_q4*sin_q2) - sin_q6*(cos_q5*(cos_q4*(sin_q1*sin_q3 - cos_q1*cos_q2*cos_q3) + cos_q1*sin_q2*sin_q4) + sin_q5*(cos_q3*sin_q1 + cos_q1*cos_q2*sin_q3));
J(2,1) = 0;
J(2,2) = cos_q1;
J(2,3) = sin_q1*sin_q2;
J(2,4) = cos_q1*cos_q3 - cos_q2*sin_q1*sin_q3;
J(2,5) = sin_q4*(cos_q1*sin_q3 + cos_q2*cos_q3*sin_q1) + cos_q4*sin_q1*sin_q2;
J(2,6) = cos_q5*(cos_q1*cos_q3 - cos_q2*sin_q1*sin_q3) - sin_q5*(cos_q4*(cos_q1*sin_q3 + cos_q2*cos_q3*sin_q1) - sin_q1*sin_q2*sin_q4);
J(2,7) = cos_q6*(sin_q4*(cos_q1*sin_q3 + cos_q2*cos_q3*sin_q1) + cos_q4*sin_q1*sin_q2) + sin_q6*(cos_q5*(cos_q4*(cos_q1*sin_q3 + cos_q2*cos_q3*sin_q1) - sin_q1*sin_q2*sin_q4) + sin_q5*(cos_q1*cos_q3 - cos_q2*sin_q1*sin_q3));
J(3,1) = 1;
J(3,2) = 0;
J(3,3) = cos_q2;
J(3,4) = sin_q2*sin_q3;
J(3,5) = cos_q2*cos_q4 - cos_q3*sin_q2*sin_q4;
J(3,6) = sin_q5*(cos_q2*sin_q4 + cos_q3*cos_q4*sin_q2) + cos_q5*sin_q2*sin_q3;
J(3,7) = cos_q6*(cos_q2*cos_q4 - cos_q3*sin_q2*sin_q4) - sin_q6*(cos_q5*(cos_q2*sin_q4 + cos_q3*cos_q4*sin_q2) - sin_q2*sin_q3*sin_q5);
J(4,1) = (291*cos_q1*sin_q3)/2000 - (863*sin_q1*sin_q2)/2000 - (33*cos_q6*(sin_q4*(cos_q1*sin_q3 + cos_q2*cos_q3*sin_q1) + cos_q4*sin_q1*sin_q2))/250 - (33*sin_q6*(cos_q5*(cos_q4*(cos_q1*sin_q3 + cos_q2*cos_q3*sin_q1) - sin_q1*sin_q2*sin_q4) + sin_q5*(cos_q1*cos_q3 - cos_q2*sin_q1*sin_q3)))/250 - (21*sin_q4*(cos_q1*sin_q3 + cos_q2*cos_q3*sin_q1))/50 + (291*cos_q2*cos_q3*sin_q1)/2000 - (21*cos_q4*sin_q1*sin_q2)/50;
J(4,2) = cos_q1*((863*cos_q2)/2000 + (21*cos_q2*cos_q4)/50 + (291*cos_q3*sin_q2)/2000 - (33*sin_q6*(cos_q5*(cos_q2*sin_q4 + cos_q3*cos_q4*sin_q2) - sin_q2*sin_q3*sin_q5))/250 + (33*cos_q6*(cos_q2*cos_q4 - cos_q3*sin_q2*sin_q4))/250 - (21*cos_q3*sin_q2*sin_q4)/50);
J(4,3) = sin_q1*sin_q2*((653*cos_q2)/2000 + (21*cos_q2*cos_q4)/50 + (291*cos_q3*sin_q2)/2000 - (33*sin_q6*(cos_q5*(cos_q2*sin_q4 + cos_q3*cos_q4*sin_q2) - sin_q2*sin_q3*sin_q5))/250 + (33*cos_q6*(cos_q2*cos_q4 - cos_q3*sin_q2*sin_q4))/250 - (21*cos_q3*sin_q2*sin_q4)/50) - cos_q2*((653*sin_q1*sin_q2)/2000 - (291*cos_q1*sin_q3)/2000 + (33*cos_q6*(sin_q4*(cos_q1*sin_q3 + cos_q2*cos_q3*sin_q1) + cos_q4*sin_q1*sin_q2))/250 + (33*sin_q6*(cos_q5*(cos_q4*(cos_q1*sin_q3 + cos_q2*cos_q3*sin_q1) - sin_q1*sin_q2*sin_q4) + sin_q5*(cos_q1*cos_q3 - cos_q2*sin_q1*sin_q3)))/250 + (21*sin_q4*(cos_q1*sin_q3 + cos_q2*cos_q3*sin_q1))/50 - (291*cos_q2*cos_q3*sin_q1)/2000 + (21*cos_q4*sin_q1*sin_q2)/50);
J(4,4) = (cos_q1*cos_q3 - cos_q2*sin_q1*sin_q3)*((21*cos_q2*cos_q4)/50 - (33*sin_q6*(cos_q5*(cos_q2*sin_q4 + cos_q3*cos_q4*sin_q2) - sin_q2*sin_q3*sin_q5))/250 + (33*cos_q6*(cos_q2*cos_q4 - cos_q3*sin_q2*sin_q4))/250 - (21*cos_q3*sin_q2*sin_q4)/50) - sin_q2*sin_q3*((33*cos_q6*(sin_q4*(cos_q1*sin_q3 + cos_q2*cos_q3*sin_q1) + cos_q4*sin_q1*sin_q2))/250 + (33*sin_q6*(cos_q5*(cos_q4*(cos_q1*sin_q3 + cos_q2*cos_q3*sin_q1) - sin_q1*sin_q2*sin_q4) + sin_q5*(cos_q1*cos_q3 - cos_q2*sin_q1*sin_q3)))/250 + (21*sin_q4*(cos_q1*sin_q3 + cos_q2*cos_q3*sin_q1))/50 + (21*cos_q4*sin_q1*sin_q2)/50);
J(4,5) = (sin_q4*(cos_q1*sin_q3 + cos_q2*cos_q3*sin_q1) + cos_q4*sin_q1*sin_q2)*((13*cos_q2*cos_q4)/40 - (33*sin_q6*(cos_q5*(cos_q2*sin_q4 + cos_q3*cos_q4*sin_q2) - sin_q2*sin_q3*sin_q5))/250 + (33*cos_q6*(cos_q2*cos_q4 - cos_q3*sin_q2*sin_q4))/250 - (13*cos_q3*sin_q2*sin_q4)/40) - (cos_q2*cos_q4 - cos_q3*sin_q2*sin_q4)*((33*cos_q6*(sin_q4*(cos_q1*sin_q3 + cos_q2*cos_q3*sin_q1) + cos_q4*sin_q1*sin_q2))/250 + (33*sin_q6*(cos_q5*(cos_q4*(cos_q1*sin_q3 + cos_q2*cos_q3*sin_q1) - sin_q1*sin_q2*sin_q4) + sin_q5*(cos_q1*cos_q3 - cos_q2*sin_q1*sin_q3)))/250 + (13*sin_q4*(cos_q1*sin_q3 + cos_q2*cos_q3*sin_q1))/40 + (13*cos_q4*sin_q1*sin_q2)/40);
J(4,6) = (sin_q5*(cos_q4*(cos_q1*sin_q3 + cos_q2*cos_q3*sin_q1) - sin_q1*sin_q2*sin_q4) - cos_q5*(cos_q1*cos_q3 - cos_q2*sin_q1*sin_q3))*((33*sin_q6*(cos_q5*(cos_q2*sin_q4 + cos_q3*cos_q4*sin_q2) - sin_q2*sin_q3*sin_q5))/250 - (33*cos_q6*(cos_q2*cos_q4 - cos_q3*sin_q2*sin_q4))/250) - (sin_q5*(cos_q2*sin_q4 + cos_q3*cos_q4*sin_q2) + cos_q5*sin_q2*sin_q3)*((33*cos_q6*(sin_q4*(cos_q1*sin_q3 + cos_q2*cos_q3*sin_q1) + cos_q4*sin_q1*sin_q2))/250 + (33*sin_q6*(cos_q5*(cos_q4*(cos_q1*sin_q3 + cos_q2*cos_q3*sin_q1) - sin_q1*sin_q2*sin_q4) + sin_q5*(cos_q1*cos_q3 - cos_q2*sin_q1*sin_q3)))/250);
J(4,7) = 0;
J(5,1) = (863*cos_q1*sin_q2)/2000 + (291*sin_q1*sin_q3)/2000 - (33*cos_q6*(sin_q4*(sin_q1*sin_q3 - cos_q1*cos_q2*cos_q3) - cos_q1*cos_q4*sin_q2))/250 - (33*sin_q6*(cos_q5*(cos_q4*(sin_q1*sin_q3 - cos_q1*cos_q2*cos_q3) + cos_q1*sin_q2*sin_q4) + sin_q5*(cos_q3*sin_q1 + cos_q1*cos_q2*sin_q3)))/250 - (21*sin_q4*(sin_q1*sin_q3 - cos_q1*cos_q2*cos_q3))/50 - (291*cos_q1*cos_q2*cos_q3)/2000 + (21*cos_q1*cos_q4*sin_q2)/50;
J(5,2) = sin_q1*((863*cos_q2)/2000 + (21*cos_q2*cos_q4)/50 + (291*cos_q3*sin_q2)/2000 - (33*sin_q6*(cos_q5*(cos_q2*sin_q4 + cos_q3*cos_q4*sin_q2) - sin_q2*sin_q3*sin_q5))/250 + (33*cos_q6*(cos_q2*cos_q4 - cos_q3*sin_q2*sin_q4))/250 - (21*cos_q3*sin_q2*sin_q4)/50);
J(5,3) = - cos_q2*((33*cos_q6*(sin_q4*(sin_q1*sin_q3 - cos_q1*cos_q2*cos_q3) - cos_q1*cos_q4*sin_q2))/250 - (291*sin_q1*sin_q3)/2000 - (653*cos_q1*sin_q2)/2000 + (33*sin_q6*(cos_q5*(cos_q4*(sin_q1*sin_q3 - cos_q1*cos_q2*cos_q3) + cos_q1*sin_q2*sin_q4) + sin_q5*(cos_q3*sin_q1 + cos_q1*cos_q2*sin_q3)))/250 + (21*sin_q4*(sin_q1*sin_q3 - cos_q1*cos_q2*cos_q3))/50 + (291*cos_q1*cos_q2*cos_q3)/2000 - (21*cos_q1*cos_q4*sin_q2)/50) - cos_q1*sin_q2*((653*cos_q2)/2000 + (21*cos_q2*cos_q4)/50 + (291*cos_q3*sin_q2)/2000 - (33*sin_q6*(cos_q5*(cos_q2*sin_q4 + cos_q3*cos_q4*sin_q2) - sin_q2*sin_q3*sin_q5))/250 + (33*cos_q6*(cos_q2*cos_q4 - cos_q3*sin_q2*sin_q4))/250 - (21*cos_q3*sin_q2*sin_q4)/50);
J(5,4) = (cos_q3*sin_q1 + cos_q1*cos_q2*sin_q3)*((21*cos_q2*cos_q4)/50 - (33*sin_q6*(cos_q5*(cos_q2*sin_q4 + cos_q3*cos_q4*sin_q2) - sin_q2*sin_q3*sin_q5))/250 + (33*cos_q6*(cos_q2*cos_q4 - cos_q3*sin_q2*sin_q4))/250 - (21*cos_q3*sin_q2*sin_q4)/50) - sin_q2*sin_q3*((33*cos_q6*(sin_q4*(sin_q1*sin_q3 - cos_q1*cos_q2*cos_q3) - cos_q1*cos_q4*sin_q2))/250 + (33*sin_q6*(cos_q5*(cos_q4*(sin_q1*sin_q3 - cos_q1*cos_q2*cos_q3) + cos_q1*sin_q2*sin_q4) + sin_q5*(cos_q3*sin_q1 + cos_q1*cos_q2*sin_q3)))/250 + (21*sin_q4*(sin_q1*sin_q3 - cos_q1*cos_q2*cos_q3))/50 - (21*cos_q1*cos_q4*sin_q2)/50);
J(5,5) = (sin_q4*(sin_q1*sin_q3 - cos_q1*cos_q2*cos_q3) - cos_q1*cos_q4*sin_q2)*((13*cos_q2*cos_q4)/40 - (33*sin_q6*(cos_q5*(cos_q2*sin_q4 + cos_q3*cos_q4*sin_q2) - sin_q2*sin_q3*sin_q5))/250 + (33*cos_q6*(cos_q2*cos_q4 - cos_q3*sin_q2*sin_q4))/250 - (13*cos_q3*sin_q2*sin_q4)/40) - (cos_q2*cos_q4 - cos_q3*sin_q2*sin_q4)*((33*cos_q6*(sin_q4*(sin_q1*sin_q3 - cos_q1*cos_q2*cos_q3) - cos_q1*cos_q4*sin_q2))/250 + (33*sin_q6*(cos_q5*(cos_q4*(sin_q1*sin_q3 - cos_q1*cos_q2*cos_q3) + cos_q1*sin_q2*sin_q4) + sin_q5*(cos_q3*sin_q1 + cos_q1*cos_q2*sin_q3)))/250 + (13*sin_q4*(sin_q1*sin_q3 - cos_q1*cos_q2*cos_q3))/40 - (13*cos_q1*cos_q4*sin_q2)/40);
J(5,6) = (sin_q5*(cos_q4*(sin_q1*sin_q3 - cos_q1*cos_q2*cos_q3) + cos_q1*sin_q2*sin_q4) - cos_q5*(cos_q3*sin_q1 + cos_q1*cos_q2*sin_q3))*((33*sin_q6*(cos_q5*(cos_q2*sin_q4 + cos_q3*cos_q4*sin_q2) - sin_q2*sin_q3*sin_q5))/250 - (33*cos_q6*(cos_q2*cos_q4 - cos_q3*sin_q2*sin_q4))/250) - (sin_q5*(cos_q2*sin_q4 + cos_q3*cos_q4*sin_q2) + cos_q5*sin_q2*sin_q3)*((33*cos_q6*(sin_q4*(sin_q1*sin_q3 - cos_q1*cos_q2*cos_q3) - cos_q1*cos_q4*sin_q2))/250 + (33*sin_q6*(cos_q5*(cos_q4*(sin_q1*sin_q3 - cos_q1*cos_q2*cos_q3) + cos_q1*sin_q2*sin_q4) + sin_q5*(cos_q3*sin_q1 + cos_q1*cos_q2*sin_q3)))/250);
J(5,7) = 0;
J(6,1) = 0;
J(6,2) = cos_q1*((33*cos_q6*(sin_q4*(sin_q1*sin_q3 - cos_q1*cos_q2*cos_q3) - cos_q1*cos_q4*sin_q2))/250 - (291*sin_q1*sin_q3)/2000 - (863*cos_q1*sin_q2)/2000 + (33*sin_q6*(cos_q5*(cos_q4*(sin_q1*sin_q3 - cos_q1*cos_q2*cos_q3) + cos_q1*sin_q2*sin_q4) + sin_q5*(cos_q3*sin_q1 + cos_q1*cos_q2*sin_q3)))/250 + (21*sin_q4*(sin_q1*sin_q3 - cos_q1*cos_q2*cos_q3))/50 + (291*cos_q1*cos_q2*cos_q3)/2000 - (21*cos_q1*cos_q4*sin_q2)/50) - sin_q1*((863*sin_q1*sin_q2)/2000 - (291*cos_q1*sin_q3)/2000 + (33*cos_q6*(sin_q4*(cos_q1*sin_q3 + cos_q2*cos_q3*sin_q1) + cos_q4*sin_q1*sin_q2))/250 + (33*sin_q6*(cos_q5*(cos_q4*(cos_q1*sin_q3 + cos_q2*cos_q3*sin_q1) - sin_q1*sin_q2*sin_q4) + sin_q5*(cos_q1*cos_q3 - cos_q2*sin_q1*sin_q3)))/250 + (21*sin_q4*(cos_q1*sin_q3 + cos_q2*cos_q3*sin_q1))/50 - (291*cos_q2*cos_q3*sin_q1)/2000 + (21*cos_q4*sin_q1*sin_q2)/50);
J(6,3) = cos_q1*sin_q2*((653*sin_q1*sin_q2)/2000 - (291*cos_q1*sin_q3)/2000 + (33*cos_q6*(sin_q4*(cos_q1*sin_q3 + cos_q2*cos_q3*sin_q1) + cos_q4*sin_q1*sin_q2))/250 + (33*sin_q6*(cos_q5*(cos_q4*(cos_q1*sin_q3 + cos_q2*cos_q3*sin_q1) - sin_q1*sin_q2*sin_q4) + sin_q5*(cos_q1*cos_q3 - cos_q2*sin_q1*sin_q3)))/250 + (21*sin_q4*(cos_q1*sin_q3 + cos_q2*cos_q3*sin_q1))/50 - (291*cos_q2*cos_q3*sin_q1)/2000 + (21*cos_q4*sin_q1*sin_q2)/50) + sin_q1*sin_q2*((33*cos_q6*(sin_q4*(sin_q1*sin_q3 - cos_q1*cos_q2*cos_q3) - cos_q1*cos_q4*sin_q2))/250 - (291*sin_q1*sin_q3)/2000 - (653*cos_q1*sin_q2)/2000 + (33*sin_q6*(cos_q5*(cos_q4*(sin_q1*sin_q3 - cos_q1*cos_q2*cos_q3) + cos_q1*sin_q2*sin_q4) + sin_q5*(cos_q3*sin_q1 + cos_q1*cos_q2*sin_q3)))/250 + (21*sin_q4*(sin_q1*sin_q3 - cos_q1*cos_q2*cos_q3))/50 + (291*cos_q1*cos_q2*cos_q3)/2000 - (21*cos_q1*cos_q4*sin_q2)/50);
J(6,4) = (cos_q1*cos_q3 - cos_q2*sin_q1*sin_q3)*((33*cos_q6*(sin_q4*(sin_q1*sin_q3 - cos_q1*cos_q2*cos_q3) - cos_q1*cos_q4*sin_q2))/250 + (33*sin_q6*(cos_q5*(cos_q4*(sin_q1*sin_q3 - cos_q1*cos_q2*cos_q3) + cos_q1*sin_q2*sin_q4) + sin_q5*(cos_q3*sin_q1 + cos_q1*cos_q2*sin_q3)))/250 + (21*sin_q4*(sin_q1*sin_q3 - cos_q1*cos_q2*cos_q3))/50 - (21*cos_q1*cos_q4*sin_q2)/50) - (cos_q3*sin_q1 + cos_q1*cos_q2*sin_q3)*((33*cos_q6*(sin_q4*(cos_q1*sin_q3 + cos_q2*cos_q3*sin_q1) + cos_q4*sin_q1*sin_q2))/250 + (33*sin_q6*(cos_q5*(cos_q4*(cos_q1*sin_q3 + cos_q2*cos_q3*sin_q1) - sin_q1*sin_q2*sin_q4) + sin_q5*(cos_q1*cos_q3 - cos_q2*sin_q1*sin_q3)))/250 + (21*sin_q4*(cos_q1*sin_q3 + cos_q2*cos_q3*sin_q1))/50 + (21*cos_q4*sin_q1*sin_q2)/50);
J(6,5) = (sin_q4*(cos_q1*sin_q3 + cos_q2*cos_q3*sin_q1) + cos_q4*sin_q1*sin_q2)*((33*cos_q6*(sin_q4*(sin_q1*sin_q3 - cos_q1*cos_q2*cos_q3) - cos_q1*cos_q4*sin_q2))/250 + (33*sin_q6*(cos_q5*(cos_q4*(sin_q1*sin_q3 - cos_q1*cos_q2*cos_q3) + cos_q1*sin_q2*sin_q4) + sin_q5*(cos_q3*sin_q1 + cos_q1*cos_q2*sin_q3)))/250 + (13*sin_q4*(sin_q1*sin_q3 - cos_q1*cos_q2*cos_q3))/40 - (13*cos_q1*cos_q4*sin_q2)/40) - (sin_q4*(sin_q1*sin_q3 - cos_q1*cos_q2*cos_q3) - cos_q1*cos_q4*sin_q2)*((33*cos_q6*(sin_q4*(cos_q1*sin_q3 + cos_q2*cos_q3*sin_q1) + cos_q4*sin_q1*sin_q2))/250 + (33*sin_q6*(cos_q5*(cos_q4*(cos_q1*sin_q3 + cos_q2*cos_q3*sin_q1) - sin_q1*sin_q2*sin_q4) + sin_q5*(cos_q1*cos_q3 - cos_q2*sin_q1*sin_q3)))/250 + (13*sin_q4*(cos_q1*sin_q3 + cos_q2*cos_q3*sin_q1))/40 + (13*cos_q4*sin_q1*sin_q2)/40);
J(6,6) = ((33*cos_q6*(sin_q4*(cos_q1*sin_q3 + cos_q2*cos_q3*sin_q1) + cos_q4*sin_q1*sin_q2))/250 + (33*sin_q6*(cos_q5*(cos_q4*(cos_q1*sin_q3 + cos_q2*cos_q3*sin_q1) - sin_q1*sin_q2*sin_q4) + sin_q5*(cos_q1*cos_q3 - cos_q2*sin_q1*sin_q3)))/250)*(sin_q5*(cos_q4*(sin_q1*sin_q3 - cos_q1*cos_q2*cos_q3) + cos_q1*sin_q2*sin_q4) - cos_q5*(cos_q3*sin_q1 + cos_q1*cos_q2*sin_q3)) - (sin_q5*(cos_q4*(cos_q1*sin_q3 + cos_q2*cos_q3*sin_q1) - sin_q1*sin_q2*sin_q4) - cos_q5*(cos_q1*cos_q3 - cos_q2*sin_q1*sin_q3))*((33*cos_q6*(sin_q4*(sin_q1*sin_q3 - cos_q1*cos_q2*cos_q3) - cos_q1*cos_q4*sin_q2))/250 + (33*sin_q6*(cos_q5*(cos_q4*(sin_q1*sin_q3 - cos_q1*cos_q2*cos_q3) + cos_q1*sin_q2*sin_q4) + sin_q5*(cos_q3*sin_q1 + cos_q1*cos_q2*sin_q3)))/250);
J(6,7) = 0;

end 